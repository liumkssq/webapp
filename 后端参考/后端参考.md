```json
更新会话 Conversation put
获取会话 conversation  get 
建立会话 /setup/conversation post
根据用户获取聊天记录 /chatlog get


type (
    // 聊天记录
    ChatLog {
        Id             string `json:"id,omitempty"`             // 消息唯一标识
        ConversationId string `json:"conversationId,omitempty"` // 会话 ID
        SendId         string `json:"sendId,omitempty"`         // 发送者 ID
        RecvId         string `json:"recvId,omitempty"`         // 接收者 ID
        MsgType        int32  `json:"msgType,omitempty"`       // 消息类型
        MsgContent     string `json:"msgContent,omitempty"`   // 消息内容
        ChatType       int32  `json:"chatType,omitempty"`     // 聊天类型（单聊/群聊）
        SendTime       int64  `json:"SendTime,omitempty"`     // 发送时间
    }

        // 会话信息
    Conversation {
        ConversationId string `json:"conversationId,omitempty"` // 会话 ID
        ChatType       int32  `json:"ChatType,omitempty"`       // 聊天类型（单聊/群聊）
        TargetId       string `json:"targetId,omitempty"`       // 目标用户/群 ID
        IsShow         bool   `json:"isShow,omitempty"`         // 是否显示该会话
        Seq            int64  `json:"seq,omitempty"`           // 消息序列号
        Read           int32  `json:"read,omitempty"`          // 已读消息数
        Total          int32  `json:"total,omitempty"`         // 总消息数
        Unread         int32  `json:"unread,omitempty"`       // 未读消息数
    }
)

// -------------- im api v1 --------------
type (
    // 聊天记录请求
    ChatLogReq {
        ConversationId string `json:"conversationId"`         // 会话 ID
        StartSendTime  int64  `json:"startSendTime,omitempty"` // 起始发送时间
        EndSendTime    int64  `json:"endSendTime,omitempty"`   // 结束发送时间
        Count          int64  `json:"count,omitempty"`         // 获取的消息数量
    }

        // 聊天记录响应
    ChatLogResp {
        List []*ChatLog `json:"list"` // 聊天记录列表
    }

        // 获取会话请求
    GetConversationsReq {}

        // 获取会话响应
    GetConversationsResp {
        UserId           string                   `json:"userId"`            // 用户 ID
        ConversationList map[string]*Conversation `json:"conversationList"` // 会话列表
    }

        // 更新会话请求
    PutConversationsReq {
        ConversationList map[string]*Conversation `json:"conversationList"` // 更新的会话列表
    }

        // 更新会话响应
    PutConversationsResp {}

        // 建立用户会话请求
    SetUpUserConversationReq {
        SendId   string `json:"sendId,omitempty"`   // 发送者 ID
        RecvId   string `json:"recvId,omitempty"`   // 接收者 ID
        ChatType int32  `json:"ChatType,omitempty"` // 聊天类型（单聊/群聊）
    }

        // 建立用户会话响应
    setUpUserConversationResp {}
)


```

```
创群 group post
申请进群 	post /group/putIn 
申请进群处理 	put /group/putIn
申请进群列表 get /group/putIns 
用户申群列表 get /groups
成员列表列表 	get /group/users
type (
    // 好友信息
    Friends {
        Id        int32  `json:"id,omitempty"`         // 好友关系ID
        FriendUid string `json:"friend_uid,omitempty"` // 好友的唯一标识
        Nickname  string `json:"nickname,omitempty"`  // 好友昵称
        Avatar    string `json:"avatar,omitempty"`    // 好友头像
        Remark    string `json:"remark,omitempty"`    // 备注信息
    }

        // 好友请求
    FriendRequests {
        Id           int64  `json:"id,omitempty"`          // 请求ID
        UserId       string `json:"user_id,omitempty"`    // 发起请求的用户ID
        ReqUid       string `json:"req_uid,omitempty"`    // 被请求的用户ID
        ReqMsg       string `json:"req_msg,omitempty"`    // 请求信息
        ReqTime      int64  `json:"req_time,omitempty"`   // 请求时间
        HandleResult int    `json:"handle_result,omitempty"` // 处理结果（0: 待处理, 1: 同意, 2: 拒绝）
        HandleMsg    string `json:"handle_msg,omitempty"` // 处理留言
    }

        // 群组信息
    Groups {
        Id              string `json:"id,omitempty"`          // 群组ID
        Name            string `json:"name,omitempty"`        // 群组名称
        Icon            string `json:"icon,omitempty"`        // 群组图标
        Status          int64  `json:"status,omitempty"`      // 群组状态（0: 正常, 1: 封禁）
        GroupType       int64  `json:"group_type,omitempty"`  // 群组类型（如公开、私密等）
        IsVerify        bool   `json:"is_verify,omitempty"`    // 是否需要验证加入
        Notification    string `json:"notification,omitempty"` // 群通知内容
        NotificationUid string `json:"notification_uid,omitempty"` // 发送通知的用户ID
    }

        // 群成员信息
    GroupMembers {
        Id            int64  `json:"id,omitempty"`            // 关系ID
        GroupId       string `json:"group_id,omitempty"`      // 群组ID
        UserId        string `json:"user_id,omitempty"`      // 用户ID
        Nickname      string `json:"nickname,omitempty"`    // 群内昵称
        UserAvatarUrl string `json:"user_avatar_url,omitempty"` // 用户头像
        RoleLevel     int    `json:"role_level,omitempty"`  // 角色等级（0: 普通成员, 1: 管理员, 2: 群主）
        InviterUid    string `json:"inviter_uid,omitempty"` // 邀请人ID
        OperatorUid   string `json:"operator_uid,omitempty"` // 操作人ID（如踢人时记录操作者）
    }

        // 群组加入请求
    GroupRequests {
        Id            int64  `json:"id,omitempty"`          // 请求ID
        UserId        string `json:"user_id,omitempty"`    // 申请加入的用户ID
        GroupId       string `json:"group_id,omitempty"`  // 目标群组ID
        ReqMsg        string `json:"req_msg,omitempty"`    // 申请消息
        ReqTime       int64  `json:"req_time,omitempty"`   // 申请时间
        JoinSource    int64  `json:"join_source,omitempty"` // 加入来源（如搜索、邀请等）
        InviterUserId string `json:"inviter_user_id,omitempty"` // 邀请人ID（若为邀请加入）
        HandleUserId  string `json:"handle_user_id,omitempty"` // 处理该请求的管理员ID
        HandleTime    int64  `json:"handle_time,omitempty"` // 处理时间
        HandleResult  int64  `json:"handle_result,omitempty"` // 处理结果（0: 待处理, 1: 同意, 2: 拒绝）
    }
)

type (
    // 发送好友请求
    FriendPutInReq {
        ReqMsg  string `json:"req_msg,omitempty"`  // 请求信息
        ReqTime int64  `json:"req_time,omitempty"` // 请求时间
        UserId  string `json:"user_uid"`         // 目标用户ID
    }
    FriendPutInResp {}
)

type (
    // 处理好友请求
    FriendPutInHandleReq {
        FriendReqId  int32 `json:"friend_req_id,omitempty"`  // 请求ID
        HandleResult int32 `json:"handle_result,omitempty"` // 处理结果（0: 待处理, 1: 同意, 2: 拒绝）
    }
    FriendPutInHandleResp {}
)

type (
    // 获取好友请求列表
    FriendPutInListReq {}
    FriendPutInListResp {
        List []*FriendRequests `json:"list"` // 好友请求列表
    }
)

type (
    // 获取好友列表
    FriendListReq {}
    FriendListResp {
        List []*Friends `json:"list"` // 好友列表
    }
)

type (
    // 创建群组
    GroupCreateReq {
        Name string `json:"name,omitempty"` // 群组名称
        Icon string `json:"icon,omitempty"` // 群组图标
    }
    GroupCreateResp {}
)

type (
    // 申请加入群组
    GroupPutInReq {
        GroupId    string `json:"group_id,omitempty"`  // 群组ID
        ReqMsg     string `json:"req_msg,omitempty"`   // 申请消息
        ReqTime    int64  `json:"req_time,omitempty"`  // 申请时间
        JoinSource int64  `json:"join_source,omitempty"` // 加入来源
    }
    GroupPutInResp {}
)

type (
    // 处理群组加入请求
    GroupPutInHandleReq {
        GroupReqId   int32  `json:"group_req_id,omitempty"` // 请求ID
        GroupId      string `json:"group_id,omitempty"`    // 群组ID
        HandleResult int32  `json:"handle_result,omitempty"` // 处理结果（0: 待处理, 1: 同意, 2: 拒绝）
    }
    GroupPutInHandleResp {}
)

type (
    // 获取群组加入请求列表
    GroupPutInListReq {
        GroupId string `json:"group_id,omitempty"` // 群组ID
    }
    GroupPutInListResp {
        List []*GroupRequests `json:"list,omitempty"` // 群组加入请求列表
    }
)

type (
    // 获取群组列表
    GroupListReq {}
    GroupListResp {
        List []*Groups `json:"list,omitempty"` // 群组列表
    }
)
```

```
好友申请 post /friend/putIn
好友申请处理 	put /friend/putIn
好友申请列表 get /friend/putIns
好友列表 	get /friends
```

```
	v1 := router.Group("/api/v1")
	{
		common := v1.Group("/common")
		{
			common.POST("/send-sms-code", core.HandlerFunc(handler.V1.Common.SmsCode))
			common.POST("/send-email-code", authorize, core.HandlerFunc(handler.V1.Common.EmailCode))
		}

		// 授权相关分组
		auth := v1.Group("/auth")
		{
			auth.POST("/login", core.HandlerFunc(handler.V1.Auth.Login))                // 登录
			auth.POST("/register", core.HandlerFunc(handler.V1.Auth.Register))          // 注册
			auth.POST("/refresh", authorize, core.HandlerFunc(handler.V1.Auth.Refresh)) // 刷新 Token
			auth.POST("/logout", authorize, core.HandlerFunc(handler.V1.Auth.Logout))   // 退出登录
			auth.POST("/forget", core.HandlerFunc(handler.V1.Auth.Forget))              // 找回密码
		}

		// 用户相关分组
		user := v1.Group("/user").Use(authorize)
		{
			user.GET("/detail", core.HandlerFunc(handler.V1.User.Detail))                   // 获取个人信息
			user.GET("/setting", core.HandlerFunc(handler.V1.User.Setting))                 // 获取个人信息
			user.POST("/update", core.HandlerFunc(handler.V1.User.ChangeDetail))            // 修改用户信息
			user.POST("/password/update", core.HandlerFunc(handler.V1.User.ChangePassword)) // 修改用户密码
			user.POST("/mobile/update", core.HandlerFunc(handler.V1.User.ChangeMobile))     // 修改用户手机号
			user.POST("/email/update", core.HandlerFunc(handler.V1.User.ChangeEmail))       // 修改用户邮箱
		}

		contact := v1.Group("/contact").Use(authorize)
		{
			contact.GET("/list", core.HandlerFunc(handler.V1.Contact.List))                   // 联系人列表
			contact.GET("/search", core.HandlerFunc(handler.V1.Contact.Search))               // 搜索联系人
			contact.GET("/detail", core.HandlerFunc(handler.V1.Contact.Detail))               // 搜索联系人
			contact.POST("/delete", core.HandlerFunc(handler.V1.Contact.Delete))              // 删除联系人
			contact.POST("/edit-remark", core.HandlerFunc(handler.V1.Contact.Remark))         // 编辑联系人备注
			contact.POST("/move-group", core.HandlerFunc(handler.V1.Contact.MoveGroup))       // 编辑联系人备注
			contact.POST("/online-status", core.HandlerFunc(handler.V1.Contact.OnlineStatus)) // 获取联系人在线状态

			// 联系人申请相关
			contact.GET("/apply/records", core.HandlerFunc(handler.V1.ContactApply.List))              // 联系人申请列表
			contact.POST("/apply/create", core.HandlerFunc(handler.V1.ContactApply.Create))            // 添加联系人申请
			contact.POST("/apply/accept", core.HandlerFunc(handler.V1.ContactApply.Accept))            // 同意人申请列表
			contact.POST("/apply/decline", core.HandlerFunc(handler.V1.ContactApply.Decline))          // 拒绝人申请列表
			contact.GET("/apply/unread-num", core.HandlerFunc(handler.V1.ContactApply.ApplyUnreadNum)) // 联系人申请未读数

			// 联系人分组
			contact.GET("/group/list", core.HandlerFunc(handler.V1.ContactGroup.List))    // 联系人分组列表
			contact.POST("/group/update", core.HandlerFunc(handler.V1.ContactGroup.Save)) // 联系人分组排序
		}

		// 聊天群相关分组
		userGroup := v1.Group("/group").Use(authorize)
		{
			userGroup.GET("/list", core.HandlerFunc(handler.V1.Group.List))                 // 群组列表
			userGroup.GET("/overt-list", core.HandlerFunc(handler.V1.Group.OvertList))      // 公开群组列表
			userGroup.GET("/detail", core.HandlerFunc(handler.V1.Group.Detail))             // 群组详情
			userGroup.POST("/create", core.HandlerFunc(handler.V1.Group.Create))            // 创建群组
			userGroup.POST("/dismiss", core.HandlerFunc(handler.V1.Group.Dismiss))          // 解散群组
			userGroup.POST("/invite", core.HandlerFunc(handler.V1.Group.Invite))            // 邀请加入群组
			userGroup.POST("/secede", core.HandlerFunc(handler.V1.Group.Secede))            // 退出群组
			userGroup.POST("/update", core.HandlerFunc(handler.V1.Group.Update))            // 设置群组信息
			userGroup.POST("/transfer", core.HandlerFunc(handler.V1.Group.Transfer))        // 群主转让
			userGroup.POST("/assign-admin", core.HandlerFunc(handler.V1.Group.AssignAdmin)) // 分配管理员
			userGroup.POST("/mute", core.HandlerFunc(handler.V1.Group.Mute))                // 修改群禁言状态
			userGroup.POST("/member-mute", core.HandlerFunc(handler.V1.Group.MemberMute))   // 修改群成员禁言状态
			userGroup.POST("/overt", core.HandlerFunc(handler.V1.Group.Overt))              // 修改群公开状态

			// 群投票相关
			userGroup.POST("/vote/create", core.HandlerFunc(handler.V1.GroupVote.Create)) // 创建群投票
			userGroup.POST("/vote/submit", core.HandlerFunc(handler.V1.GroupVote.Submit)) // 投票提交
			userGroup.POST("/vote/detail", core.HandlerFunc(handler.V1.GroupVote.Detail)) // 投票详情

			// 群成员相关
			userGroup.GET("/invite-list", core.HandlerFunc(handler.V1.Group.GetInviteFriends))             // 待邀请入群好友列表
			userGroup.GET("/member/list", core.HandlerFunc(handler.V1.Group.Members))                      // 群成员列表
			userGroup.POST("/member/remove", core.HandlerFunc(handler.V1.Group.RemoveMember))              // 移出指定群成员
			userGroup.POST("/member/update-remark", core.HandlerFunc(handler.V1.Group.UpdateMemberRemark)) // 设置群名片

			// 群公告相关
			userGroup.POST("/notice/edit", core.HandlerFunc(handler.V1.GroupNotice.CreateAndUpdate)) // 添加或编辑群公告

			// 群申请
			userGroup.POST("/apply/create", core.HandlerFunc(handler.V1.GroupApply.Create))        // 提交入群申请
			userGroup.POST("/apply/agree", core.HandlerFunc(handler.V1.GroupApply.Agree))          // 同意入群申请
			userGroup.POST("/apply/decline", core.HandlerFunc(handler.V1.GroupApply.Decline))      // 拒绝入群申请
			userGroup.GET("/apply/list", core.HandlerFunc(handler.V1.GroupApply.List))             // 入群申请列表
			userGroup.GET("/apply/all", core.HandlerFunc(handler.V1.GroupApply.All))               // 入群申请列表
			userGroup.GET("/apply/unread", core.HandlerFunc(handler.V1.GroupApply.ApplyUnreadNum)) // 入群申请未读
		}

		talk := v1.Group("/talk").Use(authorize)
		{
			talk.GET("/list", core.HandlerFunc(handler.V1.Talk.List))                                   // 会话列表
			talk.POST("/create", core.HandlerFunc(handler.V1.Talk.Create))                              // 创建会话
			talk.POST("/delete", core.HandlerFunc(handler.V1.Talk.Delete))                              // 删除会话
			talk.POST("/topping", core.HandlerFunc(handler.V1.Talk.Top))                                // 置顶会话
			talk.POST("/disturb", core.HandlerFunc(handler.V1.Talk.Disturb))                            // 会话免打扰
			talk.GET("/records", core.HandlerFunc(handler.V1.TalkRecords.GetRecords))                   // 会话面板记录
			talk.GET("/history-records", core.HandlerFunc(handler.V1.TalkRecords.SearchHistoryRecords)) // 历史会话记录
			talk.GET("/forward-records", core.HandlerFunc(handler.V1.TalkRecords.GetForwardRecords))    // 会话转发记录
			talk.GET("/file-download", core.HandlerFunc(handler.V1.TalkRecords.Download))               // 下载文件
			talk.POST("/clear-unread", core.HandlerFunc(handler.V1.Talk.ClearUnreadMessage))            // 清除会话未读数
		}

		talkMessage := v1.Group("/talk/message").Use(authorize)
		{
			talkMessage.POST("/send", core.HandlerFunc(handler.V1.Message.Send))         // 发送文本消息
			talkMessage.POST("/revoke", core.HandlerFunc(handler.V1.TalkMessage.Revoke)) // 撤销聊天消息
			talkMessage.POST("/delete", core.HandlerFunc(handler.V1.TalkMessage.Delete)) // 删除聊天消息
		}

		emoticon := v1.Group("/emoticon").Use(authorize)
		{
			emoticon.GET("/customize/list", core.HandlerFunc(handler.V1.Emoticon.List))      // 表情包列表
			emoticon.POST("/customize/upload", core.HandlerFunc(handler.V1.Emoticon.Upload)) // 上传自定义表情
			emoticon.POST("/customize/create", core.HandlerFunc(handler.V1.Emoticon.Create)) // 添加自定义表情
			emoticon.POST("/customize/delete", core.HandlerFunc(handler.V1.Emoticon.Delete)) // 删除自定义表情
		}

		upload := v1.Group("/upload").Use(authorize)
		{
			upload.POST("/media-file", core.HandlerFunc(handler.V1.Upload.Image))
			upload.POST("/init-multipart", core.HandlerFunc(handler.V1.Upload.InitiateMultipart))
			upload.POST("/multipart", core.HandlerFunc(handler.V1.Upload.MultipartUpload))
		}

		note := v1.Group("/note").Use(authorize)
		{
			// 文章相关
			note.GET("/article/list", core.HandlerFunc(handler.V1.Article.List))                     // 文章列表
			note.POST("/article/recycle-list", core.HandlerFunc(handler.V1.Article.RecycleList))     // 回收站文章列表
			note.POST("/article/editor", core.HandlerFunc(handler.V1.Article.Editor))                // 编辑文章
			note.GET("/article/detail", core.HandlerFunc(handler.V1.Article.Detail))                 // 文章详情
			note.POST("/article/delete", core.HandlerFunc(handler.V1.Article.Delete))                // 删除文章
			note.POST("/article/forever-delete", core.HandlerFunc(handler.V1.Article.ForeverDelete)) // 永久删除文章
			note.POST("/article/recover-delete", core.HandlerFunc(handler.V1.Article.Recover))       // 恢复已删除文章
			note.POST("/article/move-classify", core.HandlerFunc(handler.V1.Article.MoveClassify))   // 移动分类
			note.POST("/article/collect", core.HandlerFunc(handler.V1.Article.Collect))              // 收藏文章
			note.POST("/article/update-tag", core.HandlerFunc(handler.V1.Article.UpdateTag))         // 更新文章标签

			// 文章分类
			note.GET("/classify/list", core.HandlerFunc(handler.V1.ArticleClass.List))
			note.POST("/classify/create", core.HandlerFunc(handler.V1.ArticleClass.Edit))
			note.POST("/classify/update", core.HandlerFunc(handler.V1.ArticleClass.Edit))
			note.POST("/classify/delete", core.HandlerFunc(handler.V1.ArticleClass.Delete))
			note.POST("/classify/sort", core.HandlerFunc(handler.V1.ArticleClass.Sort))

			// 文章标签
			note.GET("/tag/list", core.HandlerFunc(handler.V1.ArticleTag.List))
			note.POST("/tag/create", core.HandlerFunc(handler.V1.ArticleTag.Edit))
			note.POST("/tag/update", core.HandlerFunc(handler.V1.ArticleTag.Edit))
			note.POST("/tag/delete", core.HandlerFunc(handler.V1.ArticleTag.Delete))

			// 文章附件
			note.POST("/annex/upload", core.HandlerFunc(handler.V1.ArticleAnnex.Upload))
			note.POST("/annex/delete", core.HandlerFunc(handler.V1.ArticleAnnex.Delete))
			note.POST("/annex/recover", core.HandlerFunc(handler.V1.ArticleAnnex.Recover))
			note.POST("/annex/forever-delete", core.HandlerFunc(handler.V1.ArticleAnnex.ForeverDelete))
			note.GET("/annex/recycle-list", core.HandlerFunc(handler.V1.ArticleAnnex.RecycleList))
			note.GET("/annex/download", core.HandlerFunc(handler.V1.ArticleAnnex.Download))
		}

		organize := v1.Group("/organize").Use(authorize)
		{
			organize.GET("/department/all", core.HandlerFunc(handler.V1.Organize.DepartmentList))
			organize.GET("/personnel/all", core.HandlerFunc(handler.V1.Organize.PersonnelList))
		}

```

